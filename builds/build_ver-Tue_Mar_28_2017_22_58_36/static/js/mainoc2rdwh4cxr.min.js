function popoverFn(){placement="right",trigger="hover",$(window).width()<=991&&(placement="top"),$.fn.popover&&$('[data-toggle="popover"]').popover("destroy").popover({trigger:trigger,placement:placement,container:"body"})}function checkFixCategory(){var scrollTop=page__content.scrollTop(),className="active";scrollTopCheck=scrollTop,scrollTop>10&&scrollTop>=window.catalogCategoryFixHeight?(catalogCategoryFix.addClass(className),catalogCategoryFixBuffer.height(catalogCategoryFixHeight)):catalogCategoryFix.hasClass(className)&&(catalogCategoryFix.removeClass(className),catalogCategoryFixBuffer.height(0))}function checkFocusInput(e){var classNameInputAnimActive="input-anim_active",typeEvent=!!e&&e.type,input=null;input=typeEvent!==!1?$(this):$(".input-anim").find(".form-control"),input.each(function(){var _this=$(this),parent=_this.closest(".input-anim"),value=_this.val().length;parent[0]&&("focus"==typeEvent||value>0?parent.addClass(classNameInputAnimActive):"blur"==typeEvent&&0==value&&parent.removeClass(classNameInputAnimActive))})}window._heightBlock=function(block){var PaddingBottom,PaddingTop;return block=$(block),PaddingTop=block.css("padding-top"),PaddingBottom=block.css("padding-bottom"),PaddingTop&&(PaddingTop=+PaddingTop.replace("px","")),PaddingBottom&&(PaddingBottom=+PaddingBottom.replace("px","")),block.height()+PaddingTop+PaddingBottom};var objFnToggle={toggleMobile:function(){if($(window).width()>991)return!0;var _this=$(this),target=_this.data("target");target&&(target=$(target))[0]&&target.hide(),_this.off("click"),_this.on("click",this,function(){$(this).toggleClass("active"),target.slideToggle(300)})}};$("[data-toggle]").click(toggleFn=function(){var _this=$(this),toggle=_this.data("toggle");"function"==typeof(base=objFnToggle[toggle])&&objFnToggle[toggle].call(this)}).each(toggleFn);var footerHeight=null,footer=$(".page__footer"),page__wrapper=$(".page__wrapper"),page__buffer=$(".page__buffer"),checkFooterHeight=function(){footerHeight=_heightBlock(footer),page__wrapper.css("margin-bottom","-"+footerHeight+"px"),page__buffer.css("height",""+footerHeight+"px")};checkFooterHeight();var _fnMenuHeaderTop=function(toggle,list,slide){var className,el,time;time=300,el=toggle.closest(".mobile-list-anim"),className="active",toggle.prop("checked")?(slide&&list.stop().slideDown(time),el.add(list).addClass(className)):(slide&&list.stop().slideUp(time),el.add(list).removeClass(className))},menuHeaderTopToggle=$("#bottomToggleMenuMobile"),menuHeaderTopList=$(".headerMobile__navBlock, .toggleNav");menuHeaderTopToggle.change(function(){_fnMenuHeaderTop(menuHeaderTopToggle,menuHeaderTopList,!1)}),_fnMenuHeaderTop(menuHeaderTopToggle,menuHeaderTopList,!1);var bottomToggleMenu=$("#bottomToggleMenu"),pageWrapper=$(".page"),pageWrapperClassShow="page_show";bottomToggleMenu.change(function(){var checked=this.checked;checked?pageWrapper.addClass(pageWrapperClassShow):pageWrapper.removeClass(pageWrapperClassShow)});var headerMobileSectionsSection=$(".headerMobile__sections-section"),headerMobileClassName="active",toggleBtnMobile=function(target){if(target.closest(".headerToggleBlock")[0])return!1;var time=300,check=!0,section=headerMobileSectionsSection.not(target);if(target.is(headerMobileSectionsSection)&&!target.hasClass(headerMobileClassName)){var block=target.data("block");block&&(block=$(block),block[0]&&(target.addClass(headerMobileClassName),block.stop().slideDown(time))),check=!1}check!==!1&&target.hasClass("headerMobile__sections-section")&&target.hasClass(headerMobileClassName)&&(section=headerMobileSectionsSection),section.hasClass(headerMobileClassName)&&section.removeClass(headerMobileClassName).each(function(){var _this=$(this);block=_this.data("block"),block&&(block=$(block),block[0]&&block.slideUp(300))}),headerMobileSectionsSection.hasClass(headerMobileClassName)?$(".page__content").addClass("page__content_hidden"):$(".page__content").removeClass("page__content_hidden")};$(document).click(function(e){var target;target=$(e.target),target.is(menuHeaderTopList)||target.closest(menuHeaderTopList)[0]||target.is(menuHeaderTopToggle)||target.is(".menuTopMobel")||(menuHeaderTopToggle[0].checked=!1,_fnMenuHeaderTop(menuHeaderTopToggle,menuHeaderTopList,!1)),target.closest(".page__content")[0]&&pageWrapper.hasClass(pageWrapperClassShow)&&(bottomToggleMenu[0].checked=!1,pageWrapper.removeClass(pageWrapperClassShow),bottomToggleMenu.change()),toggleBtnMobile(target)}),$(document).on("click",'[href="#"]',function(e){return e.preventDefault()});var headerDesktop=$(".header"),headerDesktopClassNameActive="active";popoverFn();var catalogCategoryFix=$(".catalog-category-fix"),catalogCategoryFixBuffer=$(".catalog-category-fix-buffer"),page__content=$(".page__content"),scrollTopCheck=0;window.catalogCategoryFixHeight=_heightBlock(catalogCategoryFix),checkFixCategory(),page__content.on({scroll:function(){var scrollTop=$(this).scrollTop();scrollTop>0?headerDesktop.addClass(headerDesktopClassNameActive):headerDesktop.removeClass(headerDesktopClassNameActive),checkFixCategory()}});var step=$(".step"),stepItem=step.find(".step__table-cell"),stepAfter=step.find(".step__after"),stepFn=function(){var el=stepItem.filter(".active"),widthAfter=0;if(el[0]){var offsetEl=el.offset();step.offset();PaddingTop=el.css("padding-left"),PaddingBottom=el.css("padding-right"),PaddingTop&&(widthAfter+=+PaddingTop.replace("px","")),PaddingBottom&&(widthAfter+=+PaddingBottom.replace("px","")),widthAfter+=offsetEl.left-step.offset().left+el.width()}stepAfter.width(widthAfter)};if(stepFn(),stepItem.click(function(){var _this=$(this);_this.addClass("active").siblings().removeClass("active"),stepFn()}),$(window).on({load:function(){checkFooterHeight()},resize:function(){checkFooterHeight(),stepFn(),popoverFn(),!catalogCategoryFix.hasClass("active")&&catalogCategoryFix.is(":visible")&&(window.catalogCategoryFixHeight=_heightBlock(catalogCategoryFix))}}),$.fn.slick&&($(".reviews__list").slick({slidesToShow:3,slidesToScroll:3,dots:!1,arrows:!0,prevArrow:"<button class='slick-prev slick-arrow'><svg class='arrowLeft' width='19px' height='19px'><use xmlns:xlink='http://www.w3.org/1999/xlink' xlink:href='#arrowLeft'></use></svg></button>",nextArrow:"<button class='slick-next slick-arrow'><svg class='arrowRight' width='19px' height='19px'><use xmlns:xlink='http://www.w3.org/1999/xlink' xlink:href='#arrowRight'></use></svg></button>",responsive:[{breakpoint:991,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:520,settings:{slidesToShow:1,slidesToScroll:1}}]}),$(".listItem").slick({slidesToShow:1,variableWidth:!0,infinite:!0,dots:!1,arrows:!0,prevArrow:"<button class='slick-prev slick-arrow'><svg class='arrowLeft' width='19px' height='19px'><use xmlns:xlink='http://www.w3.org/1999/xlink' xlink:href='#arrowLeft'></use></svg></button>",nextArrow:"<button class='slick-next slick-arrow'><svg class='arrowRight' width='19px' height='19px'><use xmlns:xlink='http://www.w3.org/1999/xlink' xlink:href='#arrowRight'></use></svg></button>",responsive:[{breakpoint:991,settings:{slidesToShow:2,slidesToScroll:2,variableWidth:!1}},{breakpoint:520,settings:{variableWidth:!1,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0}}]})),$.fn.selectpicker&&$("select").selectpicker({style:"",size:7}).selectpicker("setStyle","btn","remove"),"undefined"!=typeof google&&null!==google)var MapView=$(".maps-block").get(0),latlng=new google.maps.LatLng(52.4350352,103.987996,8.72),settings={zoom:9,center:latlng,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},navigationControl:!0,navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL},mapTypeId:google.maps.MapTypeId.ROADMAP},map=new google.maps.Map(MapView,settings),IrkCe=new google.maps.LatLng(52.2897502,104.339428),parkingMarker=new google.maps.Marker({position:IrkCe,map:map,animation:google.maps.Animation.DROP,title:"Автосвет Ксенон Сервис в Иркутске",zIndex:1});checkFocusInput(),$(".form-control").on("focus blur",checkFocusInput);var IScrollFn=function(){"undefined"!=typeof IScroll&&null!==IScroll&&$(".IScroll").each(function(){var visible=$(this).find(".iScrollIndicator:visible");new IScroll(this,{scrollbars:!0,mouseWheel:!0,interactiveScrollbars:!0,shrinkScrollbars:"scale",fadeScrollbars:!0,preventDefault:!1}),visible[0]&&visible.parent().siblings(".iScrollLoneScrollbar").remove()})};IScrollFn();var priceCountUp=$(".priceCountUp");window.addCount=function(count,el){el=el?$(el):priceCountUp,options={useEasing:!0,useGrouping:!0,separator:"",decimal:".",prefix:"",suffix:""};var priceEl=priceCountUp.eq(0),price=+priceEl.text();priceCountUp.each(function(){demo=new CountUp(this,price,price+ +count,0,1,options),demo.start()})};var toggleStyle=$(".toggle-style"),checkToggleStyle=function(){toggleStyle.each(function(){var _this=$(this),checked=_this.find("input").filter(":checked"),dataToggle=!1,check=!1;dataToggle=checked.siblings("input").data("toggle-block"),dataToggle&&(dataToggle=$(dataToggle),dataToggle.stop().fadeOut(300),check=!0),dataToggle=checked.data("toggle-block"),dataToggle&&(dataToggle=$(dataToggle),dataToggle.stop().delay(check?300:0).fadeIn(300))})};checkToggleStyle(),toggleStyle.find("input").change(checkToggleStyle),$(".toggle-style__el").click(function(){var input=$(this).parents(".toggle-style").find("input"),prev=input.not(":checked"),checked=input.filter(":checked")[0];checked&&(checked.checked=!1),prev[0]&&(prev[0].checked=!0),prev.change()}),$.fn.datetimepicker&&$(".dateView__input").each(function(){var _this=$(this),setting=_this.data("setting"),opts={lang:"ru",format:"d.m.Y H:i:s",parentID:_this.parent(),scrollMonth:!1,hourMin:11,hourMax:17,hourGrid:1,stepMinute:30,allowTimes:["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30"],onChangeDateTime:function(dp,$input){var setting=$input.attr("data-setting"),format="d F Y";try{setting=JSON.parse(setting),format=setting.format}catch(e){setting=!1}var DateFormatterO=new DateFormatter,parseDate=DateFormatterO.formatDate(dp,format),parseTimeH=DateFormatterO.formatDate(dp,"H"),parseTimeI=DateFormatterO.formatDate(dp,"i"),parseTimeS=DateFormatterO.formatDate(dp,"s"),dateView=$input.closest(".dateView"),date=dateView.find(".dateView_view-date"),H=dateView.find(".dateView_view-H"),i=dateView.find(".dateView_view-i");s=dateView.find(".dateView_view-s"),date.text(parseDate),H.text(parseTimeH),i.text(parseTimeI),s.text(parseTimeS)}};_this.datetimepicker($.extend(!0,setting,opts)).trigger("blur.xdsoft")}),$(".tip_input").on("focus input blur",function(){var el=$(this).closest(".form-group");$(this).val().length>3?el.addClass("form-group_tipActive"):el.removeClass("form-group_tipActive")}),$(".add-basket").click(function(){var _this=$(this),ctx=$($(window).width()>=991?".header":".headerMobile"),elBasket=ctx.find(".header__basket-link"),elBasketOffset=elBasket.offset(),parent=_this.closest(".item"),img=parent.find(".item__img"),imgOffset=img.offset(),imgClone=img.clone().addClass("animate").css({top:imgOffset.top+"px",left:imgOffset.left+"px",width:img.width()});return $("body").append(imgClone).find(".item__img.animate").animate({top:elBasketOffset.top+elBasket.height()/2,left:elBasketOffset.left+elBasket.width()/2,height:"hide",width:"hide"},{duration:500,complete:function(){$(this).remove()}}),addCount(100),!1});var maxCountItem=30,setCount=function(val,element){var input,values;input=$(element).parent().find("input"),values=+input.val(),val=""===val?values:values+val,(val<1||isNaN(val))&&(val=1),val>maxCountItem&&(val=maxCountItem),input.val(val).change()};if($(document).on("click",".count__btn",function(e){var _this=$(this),val=_this.hasClass("count__btn_plus")?1:-1;return setCount(val,this),!1}),$.fn.magnificPopup){var magnificPopupObj={delegate:"a",type:"image",tLoading:"",mainClass:"",gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]},image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.'},iframe:{patterns:{youtube:{index:"youtube.com/",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"}}}};$(".magnificPopup").each(function(){$(this).magnificPopup(magnificPopupObj)})}